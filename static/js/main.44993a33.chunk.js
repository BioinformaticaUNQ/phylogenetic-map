(this["webpackJsonpphylogenetic-map"]=this["webpackJsonpphylogenetic-map"]||[]).push([[0],{116:function(e,t,n){},117:function(e,t,n){},118:function(e,t,n){},119:function(e,t,n){},120:function(e,t,n){},122:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(36),o=n.n(c),r=(n(50),n(3)),l=n(2),_={filetreeFileName:"...",filetreeContent:"(gi_87137207_gb_DQ362940.1_:0.0000022042,(gi_87137205_gb_DQ362939.1_:0.0024606265,gi_42632357_gb_AY530092.1_:0.0012266765):0.0000022042,(gi_374433002_gb_JQ413412.1_:0.0049485853,(gi_213536496_gb_EU857548.1_:0.0012798464,(gi_213536484_gb_EU857542.1_:0.0076092300,(((((((gi_213536516_gb_EU857558.1_:0.0012265442,(gi_213536514_gb_EU857557.1_:0.0037036725,(((((gi_148330965_gb_EF589610.1_:0.0049681760,gi_343112600_gb_JF325877.1_:0.0063740728):0.0024988911,(gi_42632366_gb_AY530093.1_:0.0049571867,gi_52078088_gb_AY622381.1_:0.0000022519):0.0012251947):0.0024713605,gi_213536616_gb_EU857608.1_:0.0012268777):0.0000021470,(gi_374432966_gb_JQ413394.1_:0.0025286662,gi_213536620_gb_EU857610.1_:0.0088438480):0.0011746517):0.0012069515,gi_113472637_gb_DQ843659.1_:0.0050297906):0.0024916469):0.0000022600):0.0000022287,gi_239781638_gb_GQ153651.1_:0.0113318943):0.0100131686,gi_213536526_gb_EU857563.1_:0.0061879680):0.0000022222,(((gi_213536508_gb_EU857554.1_:0.0000022042,gi_340008331_gb_JN184400.1_:0.0012188244):0.0049572468,gi_213536512_gb_EU857556.1_:0.0050026432):0.0050265947,gi_213536522_gb_EU857561.1_:0.0049329597):0.0000021480):0.0000021562,gi_213536518_gb_EU857559.1_:0.0074621719):0.0008364075,(((gi_213536500_gb_EU857550.1_:0.0062402383,((gi_37222942_gb_AY304360.1_:0.0000024770,gi_215794515_gb_FJ168779.1_:0.0000021714):0.0036783378,((gi_34420896_gb_AY297749.1_:0.0000023688,gi_24429881_gb_AY145296.1_:0.0000022042):0.0000024792,(((gi_374432960_gb_JQ413391.1_:0.0036881685,gi_374432962_gb_JQ413392.1_:0.0012441049):0.0024514599,(gi_24429883_gb_AY145297.1_:0.0000023792,gi_24429891_gb_AY145301.1_:0.0000024756):0.0012214941):0.0012214383,((((((gi_402691475_dbj_AB618743.1_:0.0012205432,(gi_402691557_dbj_AB693958.1_:0.0036861708,(MPVFARG1010:0.0037266865,MPVFARG610:0.0049590218):0.0037218728):0.0000022042):0.0000021140,gi_365266226_gb_EF397627.2_:0.0024488585):0.0076183297,gi_402691483_dbj_AB618747.1_:0.0050809199):0.0011113827,gi_237874135_dbj_AB503857.1_:0.0062617124):0.0000024567,(gi_374432956_gb_JQ413388.1_:0.0000022042,gi_374432958_gb_JQ413389.1_:0.0000022042):0.0000022636):0.0000025248,MPVFARG211:0.0139028319):0.0024468880):0.0000022954):0.0000020999):0.0024699253):0.0012064711,gi_87137209_gb_DQ362941.1_:0.0000022042):0.0037489711,gi_213536498_gb_EU857549.1_:0.0049859208):0.0055365973):0.0310393089,(((((((gi_156567693_gb_EF535506.1_:0.0012280048,gi_402691463_dbj_AB618737.1_:0.0000022042):0.0000021336,gi_118498878_gb_EF081369.1_:0.0037038831):0.0050610495,(gi_215794505_gb_FJ168778.1_:0.0025407181,((((gi_402691487_dbj_AB618749.1_:0.0000025082,gi_402691503_dbj_AB618757.1_:0.0012370927):0.0012378575,gi_402691553_dbj_AB693956.1_:0.0024829734):0.0000020999,(((gi_402691561_dbj_AB693960.1_:0.0012371678,gi_326649640_gb_HM197719.1_:0.0012371149):0.0000020308,gi_402691511_dbj_AB618761.1_:0.0000022042):0.0000022042,gi_402691549_dbj_AB693954.1_:0.0012371352):0.0012366228):0.0102826174,(gi_402691469_dbj_AB618740.1_:0.0022663205,gi_374432978_gb_JQ413400.1_:0.0014427655):0.0610443810):0.0025809558):0.0063670047):0.0011666174,(gi_113472627_gb_DQ843658.1_:0.0024642443,gi_340008351_gb_JN184402.1_:0.0024627426):0.0000021383):0.0012259457,(gi_402691459_dbj_AB618735.1_:0.0000022042,gi_374432984_gb_JQ413403.1_:0.0012279283):0.0012369781):0.0012380213,(gi_24429885_gb_AY145298.1_:0.0024744627,gi_24429889_gb_AY145300.1_:0.0012315688):0.0000022144):0.0037030431,gi_24429867_gb_AY145289.1_:0.0000021557):0.2707307868):0.0071064516):0.0064949684):0.0036619775):0.0000021724);",locationFileName:"....",locationContent:[{name:"Londres",seq:"gi|213536518|gb|EU857559.1|"},{name:"Londres",seq:"gi|213536518|gb|EU857559.2|"},{name:"Buenos Aires",seq:"gi|213536518|gb|EU857559.4|"},{name:"Buenos Aires",seq:"gi|213536518|gb|EU857559.10|"}]},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FILETREE_CONTENT":return Object(l.a)(Object(l.a)({},e),{},{filetreeContent:t.payload.content,filetreeFileName:t.payload.fileName});case"SET_LOCATION_CONTENT":return Object(l.a)(Object(l.a)({},e),{},{locationContent:JSON.parse(t.payload.content),locationFileName:t.payload.fileName});case"CLEAN_FILES":return Object(l.a)(Object(l.a)({},e),{},{filetreeContent:void 0,locationContent:void 0});default:return e}},s=n(37),m=n.n(s),u=(n(51),function(e){var t=e.filetreeName,n=e.locationName,a=e.showInfo,c=e.cleanFiles;return i.a.createElement("header",{className:"header"},i.a.createElement("div",{className:"iconContainer",onClick:c},i.a.createElement("img",{src:m.a,alt:"icon",className:"icon"}),i.a.createElement("p",{className:"text"},"Phylogenetic Map!")),a&&i.a.createElement("div",{className:"files"},i.a.createElement("p",{className:"text"},"Treefile: ",t),i.a.createElement("p",{className:"text"},"Location: ",n)))}),f=n(44),b=n(38),d=n.n(b),p=function(e){return Promise.all(e.map((function(e){return d.a.get("https://api.opencagedata.com/geocode/v1/json?key=".concat("b4ec1cf9ef564381871d4386e2133a63","&q=").concat(e.name)).then((function(e){return e.data})).then((function(t){var n=t.results[0].geometry,a=n.lat,i=n.lng;return Object(l.a)(Object(l.a)({},e),{},{latitude:a,longitude:i})}))})))},E="M9,0C4.029,0,0,4.029,0,9s4.029,9,9,9s9-4.029,9-9S13.971,0,9,0z M9,15.93 c-3.83,0-6.93-3.1-6.93-6.93S5.17,2.07,9,2.07s6.93,3.1,6.93,6.93S12.83,15.93,9,15.93 M12.5,9c0,1.933-1.567,3.5-3.5,3.5S5.5,10.933,5.5,9S7.067,5.5,9,5.5 S12.5,7.067,12.5,9z",h=n(39),N=n.n(h),v=(n(69),function(e){var t=e.locationContent,n=e.handleToogleModal,c=Object(a.useState)([]),o=Object(r.a)(c,2),_=o[0],g=o[1];return Object(a.useEffect)((function(){var e;p((e=t,(e||[]).reduce((function(e,t){var n=e.findIndex((function(e){return e.name===t.name}));return-1!==n?(e[n].displaySeq="".concat(e[n].displaySeq,"\n").concat(t.seq),e):[].concat(Object(f.a)(e),[{name:t.name,displaySeq:t.seq}])}),[]))).then((function(e){return e.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{targetSVG:E,scale:1})}))})).then(g)}),[t]),Object(a.useEffect)((function(){var e=window,t=e.am4core,n=e.am4maps,a=e.am4geodata_worldLow;t.useTheme((function(e){e instanceof n.MapPolygon&&(e.fill=t.color("#7fb5b0"))}));var i=t.create("chartdiv",n.MapChart),c=new t.InterfaceColorSet;i.geodata=a,i.projection=new n.projections.Mercator,i.zoomControl=new n.ZoomControl,i.homeGeoPoint={latitude:51,longitude:-23};var o=i.series.push(new n.MapPolygonSeries);o.exclude=["AQ"],o.useGeodata=!0,o.mapPolygons.template.nonScalingStroke=!0;var r=i.series.push(new n.MapImageSeries),l=r.mapImages.template;l.tooltipText="{name}\n{displaySeq}",l.nonScaling=!0;var g=l.createChild(t.Sprite);g.path=E,g.horizontalCenter="middle",g.verticalCenter="middle",g.scale=.9,g.fill=c.getFor("alternativeBackground"),l.propertyFields.latitude="latitude",l.propertyFields.longitude="longitude",r.data=_}),[_]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{id:"chartdiv",className:"map"}),i.a.createElement("div",{className:"button-tree",onClick:function(){return n(!0)}},i.a.createElement("img",{src:N.a,alt:"phylogeneticTree",className:"icon"})))}),C=(n(70),function(e){e.errors;return i.a.createElement("div",{className:"footer"})}),j=(n(71),n(40)),O=n.n(j),y=n(41),F=n.n(y),A=(n(111),n(42)),S=n.n(A);n(116);var w=function(e){var t=e.newick,n=O.a.parse_newick(t),c=Object(a.useRef)(null);return function e(t){t.children.forEach((function(t,n){if(t.name){var a=t.name.match("gi_(.*)_.*_(.*)_");a?(t.gi="Gi: ".concat(a[1]),t.gb=a[2]):(t.gi=t.name,t.gb=t.name)}t.displayName=t.name?t.gi:t.branch_length,t.key="".concat(n,"-").concat(t.displayName),t.children&&e(t)}))}(n),Object(a.useEffect)((function(){if(c.current){var e=document.querySelector("#phylogeneticTreeContainer svg");S()(e,{dblClickZoomEnabled:!1})}}),[c]),i.a.createElement("div",{className:"phylogeneticTreeContainer",id:"phylogeneticTreeContainer"},i.a.createElement(F.a,{ref:c,data:n,height:2e3,width:2e3,labelProp:"displayName",keyProp:"key"}))},T=function(e){var t=e.filetreeContent,n=e.closeModal;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"modalBackground",onClick:n}),i.a.createElement("div",{className:"modalContent"},i.a.createElement(w,{newick:t})))},k=(n(117),function(e){var t=e.filetreeContent,n=e.locationContent,c=e.goBack,o=Object(a.useState)(!1),l=Object(r.a)(o,2),_=l[0],g=l[1],s=Object(a.useState)([]),m=Object(r.a)(s,2),u=m[0],f=m[1];return Object(a.useEffect)((function(){f([])}),[t,n]),u.length?i.a.createElement(C,{errors:u,goBack:c}):i.a.createElement("div",{className:"mainContainer"},i.a.createElement(v,{locationContent:n,handleToogleModal:function(e){return g(e)}}),_&&i.a.createElement(T,{filetreeContent:t,closeModal:function(){return g(!1)}}))}),B=(n(118),function(e){var t=e.setFiletreeContent,n=e.setLocationContent,c=e.generateMap,o=Object(a.useState)(""),l=Object(r.a)(o,2),_=l[0],g=l[1],s=Object(a.useState)(""),m=Object(r.a)(s,2),u=m[0],f=m[1],b=Object(a.useRef)(null),d=Object(a.useRef)(null),p=function(e,t,n){t(e.name);var a=new FileReader;a.onload=function(t){return n(e.name,t.target.result)},a.readAsText(e)};return i.a.createElement("div",{className:"form"},i.a.createElement("div",{className:"formRow ".concat(_&&"selectedFile")},i.a.createElement("label",{htmlFor:"treefile",className:"label"},"Treefile: ",_||"Select file"),i.a.createElement("span",{htmlFor:"treefile",className:"btn btnUpload",onClick:function(){return b.current.click()}},"Upload"),i.a.createElement("input",{id:"treefile",type:"file",ref:b,className:"inputFile",accept:".treefile",onChange:function(e){return p(e.target.files[0],g,t)}})),i.a.createElement("div",{className:"formRow ".concat(u&&"selectedFile")},i.a.createElement("label",{htmlFor:"locationfile",className:"label"},"Treefile: ",u||"Select file"),i.a.createElement("span",{htmlFor:"locationfile",className:"btn btnUpload",onClick:function(){return d.current.click()}},"Upload"),i.a.createElement("input",{id:"locationfile",type:"file",className:"inputFile",accept:".json",ref:d,onChange:function(e){return p(e.target.files[0],f,n)}})),i.a.createElement("span",{className:"btn btnPrimary",onClick:c},"Generate Map"))}),M=n(43),U=n.n(M),J=(n(119),function(){return i.a.createElement("footer",{className:"footer"},i.a.createElement("a",{href:"http://www.github.com",className:"link"},i.a.createElement("img",{src:U.a,alt:"github",className:"icon"})))});n(120);var Q=function(){var e=Object(a.useReducer)(g,_),t=Object(r.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(!1),l=Object(r.a)(o,2),s=l[0],m=l[1];return i.a.createElement("section",{className:"container"},i.a.createElement(u,{filetreeName:n.filetreeFileName,locationName:n.locationFileName,showInfo:s,cleanFiles:function(){c({type:"CLEAN_FILES"}),m(!1)}}),s?i.a.createElement(k,{filetreeContent:n.filetreeContent,locationContent:n.locationContent,goBack:function(){return m(!1)}}):i.a.createElement(B,{setFiletreeContent:function(e,t){return c({type:"SET_FILETREE_CONTENT",payload:{fileName:e,content:t}})},setLocationContent:function(e,t){return c({type:"SET_LOCATION_CONTENT",payload:{fileName:e,content:t}})},generateMap:function(){return m(!0)}}),i.a.createElement(J,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},37:function(e,t,n){e.exports=n.p+"static/media/icon.67a5203a.svg"},39:function(e,t,n){e.exports=n.p+"static/media/tree.db21f93f.svg"},43:function(e,t,n){e.exports=n.p+"static/media/github.76d344f0.svg"},45:function(e,t,n){e.exports=n(122)},50:function(e,t,n){},51:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){}},[[45,1,2]]]);
//# sourceMappingURL=main.44993a33.chunk.js.map